<%- model_class = Property -%>

<script type="text/javascript">
        function modal_show(id) {
          var modalId = '#myModal' + id;
          $("button[data-target='" + modalId + "'"+ "]").click();
        }
</script>

<div class="col-lg-4">
  <div class="well sidebar-nav">
    <form class="form-horizontal" method="GET" action="/properties">
        <div class="form-group">
            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle btn-lg" type="button" id="state" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    Choose State...
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="state">
                    <li><a href="#" data-value="nsw">New South Wales</a></li>
                    <li><a href="#" data-value="wa">Western Australia</a></li>
                    <li><a href="#" data-value="ql">Queensland</a></li>
                    <li><a href="#" data-value="nt">Northern Territory</a></li>
                    <li><a href="#" data-value="sa">South Australia</a></li>
                    <li><a href="#" data-value="v">Victoria</a></li>
                    <li><a href="#" data-value="t">Tasmania</a></li>
                    <li><a href="#" data-value="act">Australian Capital Territory</a></li>
                    <li><a href="#" data-value="jbt">Jervis Bay Territory</a></li>
                </ul>
                <input type="hidden" name="state" value="">
            </div>
        </div>
        <div class="form-group">
            <div class="dropdown">
                <button class="btn btn-default dropdown-toggle btn-lg" type="button" id="town" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                   Choose Region...
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="town">
                    <li><a href="#" data-value="sr">Sydney Region</a></li>
                    <li><a href="#" data-value="hcnc">Hunter, Central & North Coasts</a></li>
                    <li><a href="#" data-value="isc">Illawarra & South Coast</a></li>
                    <li><a href="#" data-value="rnsw">Regional NSW</a></li>
                </ul>
                <input type="hidden" name="region" value="">
            </div>
        </div>
        <div class="form-group">
          <div class="dropdown">
                <button class="btn btn-default dropdown-toggle btn-lg" type="button" id="kind" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                   Choose Type of Unit...
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu" aria-labelledby="kind">
                    <li><a href="#" data-value="house">House</a></li>
                    <li><a href="#" data-value="land">Land</a></li>
                </ul>
                <input type="hidden" name="kind" value="">
            </div>
        </div>
        <div class="form-group">
            <input type="text" class="form-control input-lg" id="town" name="town" placeholder="Sydney">
        </div>
        <div class="row">
          <div class="col-sm-2">
            <span class="fa fa-usd"></span>
          </div>
          <div class="form-group col-sm-5">
            <select class="form-control" name="min_price">
              <option value="">Min</option>
              <option value="0">0</option>
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="300">300</option>
            </select>
          </div>
          <div class="form-group col-sm-5">
            <select class="form-control" name="max_price">
              <option value="">Max</option>
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="300">300</option>
              <option value="400">400</option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-2">
            <span class="fa fa-user"></span>
          </div>
          <div class="form-group col-sm-5">
            <select class="form-control" name="min_population">
              <option value="">Min</option>
              <option value="0">0</option>
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="300">300</option>
            </select>
          </div>
          <div class="form-group col-sm-5">
            <select class="form-control" name="max_population">
              <option value="">Max</option>
              <option value="100">100</option>
              <option value="200">200</option>
              <option value="300">300</option>
              <option value="400">400</option>
            </select>
          </div>
        </div>
        <button type="submit" class="btn btn-primary btn-lg">
            <span class="fa fa-search"></span> Search</button>
    </form>
    <form class="form-horizontal" method="GET" action="/properties/compare" style="margin-top: 10px;">
        <button type="submit" class="btn btn-warning btn-lg">
            <span class="fa fa-eye"></span> Compare</button>
            <input type="hidden" id="x1" name="x1" value="1" />
            <input type="hidden" id="x2" name="x2" value="2" />
    </form>
  </div>
</div>

<div class="page-header">
  <h1><%=t '.title', :default => model_class.model_name.human.pluralize.titleize %></h1>
</div>
<div class="col-lg-8">

  <% @properties.each do |property| %>

    <div class="block">

      <div class="input-group">
      <span class="input-group-addon">
        <input type="checkbox" aria-label="...">
      </span>
    </div>

      <h2><%= property.name %></h2>

      <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
      
        <!-- Indicators -->
        <ol class="carousel-indicators">
          <li data-target="#carousel-example-generic" data-slide-to="0" class="active"></li>
          <li data-target="#carousel-example-generic" data-slide-to="1"></li>
          <li data-target="#carousel-example-generic" data-slide-to="2"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox" onclick="javascript:modal_show(<%= property.id %>);">
          <div class="item active">
            <%= image_tag("photo0000-1035.jpg") %>
            <div class="carousel-caption">
            ...
            </div>
          </div>
        <div class="item">
          <%= image_tag("photo0000-1035.jpg") %>
          <div class="carousel-caption">
            ...
          </div>
        </div>
      </div>

        <!-- Controls -->
        <a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev">
          <span class="fa fa-chevron-left" aria-hidden="true"></span>
          <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next">
          <span class="fa fa-chevron-right" aria-hidden="true"></span>
          <span class="sr-only">Next</span>
        </a>
      </div>

      <table class="table">
        <tr>
          <th><span class="fa fa-usd"></span> <%= property.price %></th>
        </tr>
        <tr>
          <th><span class="fa fa-user"></span> <%= property.population %> people</th>
        </tr>
      </table>
            <button style="display: none;" type="button" class="btn btn-detault btn-lg" data-toggle="modal" data-target="#myModal<%= property.id %>">See Details</button>
            <div class="modal fade" id="myModal<%= property.id %>" tabindex="-1" role="dialog" aria-labelledby="myModalLabel<%= property.id %>">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h2 class="modal-title" id="myModalLabel<%= property.id %>"><%= property.name %></h2>
                  </div>
                  <div class="modal-body">
                    <div class="block">
                      <%= image_tag("photo0000-1035.jpg", :size => "512x384") %>
                    </div>
                    <div class="block">
                      <p><%= property.description %></P>
                    </div>
                    <div>
                      <table class="table table-bordered">
                        <tr>
                          <td><span class="fa fa-globe"></span> Location</td>
                          <td><%= property.state %> <%= property.region %> <%= property.town %></td>
                        </tr>
                        <tr>
                          <td><span class="fa fa-usd"></span> Price</td>
                          <td><%= property.price %></td>
                        </tr>
                        <tr>
                          <td><span class="fa fa-user"></span> Population</td>
                          <td><%= property.population %></td>
                        </tr>
                        <tr>
                          <td><span class="fa fa-home"></span> Type of Unit</td>
                          <td><%= property.kind %></td>
                        </tr>
                        <tr>
                          <td><span class="fa fa-sun-o"></span> Position</td>
                          <td><%= property.position %></td>
                        </tr>
                      </table>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                  </div>
                </div>
              </div>
            </div>
      </table>

    </div>

  <% end %>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:id) %></th>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:price) %></th>
      <th><%= model_class.human_attribute_name(:population) %></th>
      <th><%= model_class.human_attribute_name(:state) %></th>
      <th><%= model_class.human_attribute_name(:region) %></th>
      <th><%= model_class.human_attribute_name(:town) %></th>
      <th><%= model_class.human_attribute_name(:kind) %></th>
      <th><%= model_class.human_attribute_name(:position) %></th>
      <th><%= model_class.human_attribute_name(:description) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
      <th><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>
  <tbody>
    <% @properties.each do |property| %>
      <tr>
        <td><%= link_to property.id, property_path(property) %></td>
        <td><%= property.name %></td>
        <td><%= property.price %></td>
        <td><%= property.population %></td>
        <td><%= property.state %></td>
        <td><%= property.region %></td>
        <td><%= property.town %></td>
        <td><%= property.kind %></td>
        <td><%= property.position %></td>
        <td><%= property.description %></td>
        <td><%=l property.created_at %></td>
        <td>
          <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_property_path(property), :class => 'btn btn-default btn-xs' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      property_path(property),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-xs btn-default' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_property_path,
            :class => 'btn btn-default' %>
